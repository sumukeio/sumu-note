# æµ‹è¯•è¯´æ˜

## æµ‹è¯•æ¡†æ¶

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•å·¥å…·ï¼š
- **Vitest** - æµ‹è¯•è¿è¡Œå™¨
- **@testing-library/react** - React ç»„ä»¶æµ‹è¯•
- **@testing-library/jest-dom** - DOM æ–­è¨€æ‰©å±•
- **jsdom** - æµè§ˆå™¨ç¯å¢ƒæ¨¡æ‹Ÿ

## è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•ï¼ˆä¸€æ¬¡æ€§ï¼‰
npm test -- --run

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
npm test -- --coverage
```

## æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ setup.ts                    # æµ‹è¯•ç¯å¢ƒé…ç½®
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.test.ts          # å·¥å…·å‡½æ•°æµ‹è¯• âœ…
â””â”€â”€ components/
    â”œâ”€â”€ AuthModal.test.tsx     # è®¤è¯ç»„ä»¶æµ‹è¯• âœ…
    â”œâ”€â”€ FolderManager.test.tsx # æ–‡ä»¶å¤¹ç®¡ç†æµ‹è¯• âš ï¸
    â””â”€â”€ NoteManager.test.tsx   # ç¬”è®°ç®¡ç†æµ‹è¯• âš ï¸
```

## æµ‹è¯•çŠ¶æ€

### âœ… å·²å®Œæˆçš„æµ‹è¯•

1. **å·¥å…·å‡½æ•°æµ‹è¯• (utils.test.ts)** - 6ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡
   - `cn` å‡½æ•°ç±»ååˆå¹¶
   - æ¡ä»¶ç±»åå¤„ç†
   - Tailwind CSS ç±»åå†²çªå¤„ç†

2. **è®¤è¯ç»„ä»¶æµ‹è¯• (AuthModal.test.tsx)** - 3ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡
   - é»˜è®¤æ˜¾ç¤ºç™»å½•æ ‡ç­¾é¡µ
   - æ³¨å†Œæ ‡ç­¾é¡µæ¸²æŸ“
   - æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½

### âš ï¸ éœ€è¦å®Œå–„çš„æµ‹è¯•

1. **FolderManager.test.tsx** - éœ€è¦å®Œå–„ Supabase mock
   - ç»„ä»¶åœ¨åŠ è½½çŠ¶æ€ï¼ˆç­‰å¾…æ•°æ®åŠ è½½ï¼‰
   - éœ€è¦æ­£ç¡®mocké“¾å¼è°ƒç”¨ï¼ˆselect â†’ eq â†’ orderï¼‰

2. **NoteManager.test.tsx** - éœ€è¦å®Œå–„ Supabase mock
   - æ”¯æŒå¤šæ¬¡ `.order()` é“¾å¼è°ƒç”¨
   - éœ€è¦æ­£ç¡®mockå¤æ‚æŸ¥è¯¢é€»è¾‘

## Mock é…ç½®

æµ‹è¯•ç¯å¢ƒå·²é…ç½®ä»¥ä¸‹mockï¼š
- Next.js Router (`next/navigation`)
- Supabase Client (`@/lib/supabase`)
- ç¯å¢ƒå˜é‡è®¾ç½®

## å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–

### âœ… å·²éªŒè¯
- å·¥å…·å‡½æ•°æ­£ç¡®æ€§
- è®¤è¯UIæ¸²æŸ“

### ğŸ“ å¾…å®Œå–„
- è®¤è¯æµç¨‹ï¼ˆç™»å½•/æ³¨å†Œé€»è¾‘ï¼‰
- æ–‡ä»¶å¤¹CRUDæ“ä½œ
- ç¬”è®°CRUDæ“ä½œ
- å‘å¸ƒåŠŸèƒ½
- å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

## å»ºè®®

å¯¹äºå¤æ‚çš„ç»„ä»¶æµ‹è¯•ï¼Œå»ºè®®ï¼š
1. ä½¿ç”¨æ›´å®Œå–„çš„ Supabase mock åº“ï¼ˆå¦‚ `@supabase/supabase-js` çš„æµ‹è¯•å·¥å…·ï¼‰
2. æˆ–ä½¿ç”¨é›†æˆæµ‹è¯•ï¼ˆE2Eæµ‹è¯•ï¼‰æ¥è¦†ç›–å®Œæ•´çš„ç”¨æˆ·æµç¨‹
3. å½“å‰åŸºç¡€æµ‹è¯•å·²è¦†ç›–æ ¸å¿ƒå·¥å…·å‡½æ•°å’ŒåŸºç¡€UIæ¸²æŸ“

## æ³¨æ„äº‹é¡¹

- æµ‹è¯•ç¯å¢ƒå·²è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
- Supabase mock éœ€è¦æ”¯æŒé“¾å¼è°ƒç”¨
- å¼‚æ­¥æ“ä½œéœ€è¦ä½¿ç”¨ `waitFor` ç­‰å¾…ç»„ä»¶æ›´æ–°

